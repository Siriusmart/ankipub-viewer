<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Self Hosting Guide - AnkiPub Web Viewer</title>
    <link rel="icon" href="./logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="light">
    <div id="guide">
      <h1>Self Hosting Guide</h1>
      <p>
        This is actually a <b>static site</b>! You can host this with any of the
        followings
      </p>
      <ul>
        <li>Web servers such as Nginx.</li>
        <li>Free online hosts such as GitHub pages.</li>
      </ul>

      <h2>Prerequisite</h2>
      <ol>
        <li>
          Install
          <a href="https://www.rust-lang.org/tools/install" target="_blank"
            >Rust</a
          >.
        </li>
        <li>
          Install
          <a href="https://github.com/Siriusmart/anki-webify" target="_blank"
            >Anki Webify</a
          >.
          <br />
          <code class="copy"
            >cargo install --git https://github.com/Siriusmart/anki-webify</code
          >
        </li>
        <li>
          Download
          <a
            href="https://github.com/Siriusmart/ankipub-viewer/archive/refs/heads/master.zip"
            >AnkiPub Web Viewer</a
          >.
        </li>
      </ol>

      <h2>Setup</h2>

      <h3>1. Convert Anki Decks to HTML</h3>

      <p>
        Export a deck with option
        <b>"support older Anki versions"</b>. Then run command
      </p>
      <code class="copy"
        >anki-webify path/to/exported.apkg path-to-target-folder</code
      >
      <p>
        Great! You now have the HTML version of the Anki deck in the target
        folder.
      </p>

      <h3>2. Update Index</h3>

      <p>
        Place the .apkg file and the folder of generated content to the site
        folder, and edit <b>packages.json</b> accordingly.
      </p>
      <ul>
        <li>The <b>key field</b> is the name of the generated folder.</li>
        <li>The <b>name</b> is the display name of the deck.</li>
        <li>The <b>author</b> is your name.</li>
        <li>The <b>date</b> is the last update time of the deck.</li>
        <li>The <b>download</b> is the path to the apkg file.</li>
      </ul>

      <h3>3. git push --force</h3>
      <p>
        Put the site folder to where you are hosting it, and you are good to go.
      </p>

      <p>
        DM me on
        <a href="https://discord.gg/WAR9aKVFQJ" target="_blank">Discord</a> if
        you need any help, or just come and say hi :D
      </p>
    </div>

    <div id="donation-home-guide">
      <h2>Pay My Rent (a little bit)</h2>

      <p>
        An actual human spent time behind the screen to write this. Hey, that's
        me!
      </p>
      <p>
        On a side note just want to mention this is one of the better JavaScript
        code I've wrote. It is structured so <b>entry.js</b> acts as a router to
        run the script for the corresponding page. You can check the
        <a
          style="font-weight: 500"
          href="https://github.com/Siriusmart/ankipub-viewer"
          target="_blank"
          >GitHub</a
        >
        repo to see that happening.
      </p>
      <script src="https://liberapay.com/siriusmart/widgets/receiving.js"></script>
      <br />
      <br />
      <script src="https://liberapay.com/siriusmart/widgets/button.js"></script>
      <noscript
        ><a href="https://liberapay.com/siriusmart/donate"
          ><img
            alt="Donate using Liberapay"
            src="https://liberapay.com/assets/widgets/donate.svg" /></a
      ></noscript>
    </div>

    <div id="donation-global">
      <script src="https://liberapay.com/siriusmart/widgets/button.js"></script>
      <noscript
        ><a href="https://liberapay.com/siriusmart/donate"
          ><img
            alt="Donate using Liberapay"
            src="https://liberapay.com/assets/widgets/donate.svg" /></a
      ></noscript>
    </div>

    <div id="footer">
      <a href="./" id="go-home">Home</a>
      <a href="./host.html">Self Hosting</a>
    </div>
  </body>
</html>
